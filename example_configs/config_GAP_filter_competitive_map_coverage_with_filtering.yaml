# Example configuration for GAP_filter_competitive_map_coverage with filtering
#
# This pipeline:
# 1. Maps non-chr contigs to chromosome scaffolds
# 2. Calculates mapping stats and long-read coverage
# 3. Generates interactive HTML report
# 4. Optionally filters redundant contigs

# Input assembly (must be a dictionary)
assemblies:
  h12v7: /path/to/h12v7_assembly.fasta

# Chromosome-scale scaffold names (list)
chromosomes:
  - h12v7_1
  - h12v7_2
  - h12v7_3
  - h12v7_4
  - h12v7_5
  - h12v7_6
  - h12v7_7
  - h12v7_8
  - h12v7_9
  - h12v7_10
  - h12v7_11
  - h12v7_12
  - h12v7_13

# Long read files for coverage calculation
# Structure: {name: {file: path, type: map-hifi/map-ont/map-pb}}
long_reads:
  hifi:
    file: /path/to/hifi_reads.fastq.gz
    type: map-hifi
  ont:
    file: /path/to/ont_reads.fastq.gz
    type: map-ont

# Optional: Thread configuration
mapping_threads: 32
sort_threads: 8

# Optional: Minimum MAPQ for considering alignments (default: 0)
min_mapq: 0

# Optional: Generate reports (default: True)
generate_html: True
generate_static: False

# ============================================================
# Filtering and Trimming Configuration
# ============================================================

# Optional: Full-contig filtering (runs first, removes complete redundant contigs)
filter_redundant: True           # Remove contigs that are completely redundant
filter_min_coverage: 95.0        # Remove if ≥95% of contig aligned
filter_min_mapq: 30              # And best match MAPQ ≥30

# Enable regional trimming (runs second, breaks contigs and keeps non-redundant pieces)
trim_redundant_regions: True

# Standard trimming threshold (catches most redundant regions)
trim_min_block_size: 10000       # 10kb blocks
trim_min_mapq: 20                # Good quality alignments

# Aggressive threshold (catches large regions with ambiguous mapping)
trim_aggressive_min_block_size: 50000   # 50kb blocks
trim_aggressive_min_mapq: 8              # Lower MAPQ threshold

# Other trimming parameters
trim_min_keep_piece: 5000        # Keep pieces ≥5kb after trimming
trim_max_redundant_pct: 100.0    # Effectively disabled - keep all pieces ≥ min_keep_piece
                                 # (Lower to 80.0 if you want to remove "swiss cheese" contigs)

# Alternative filtering thresholds (commented out):
# Moderate filtering:
# filter_min_coverage: 80.0
# filter_min_mapq: 20

# Aggressive filtering:
# filter_min_coverage: 50.0
# filter_min_mapq: 10

# More aggressive trimming:
# trim_min_block_size: 5000
# trim_min_mapq: 15
# trim_aggressive_min_block_size: 30000
# trim_aggressive_min_mapq: 5

# More conservative trimming:
# trim_min_block_size: 20000
# trim_min_mapq: 30
# trim_aggressive_min_block_size: 100000
# trim_aggressive_min_mapq: 10
